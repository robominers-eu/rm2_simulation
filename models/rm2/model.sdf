<?xml version="1.0"?>
<sdf version="1.6">
  <model name="rm2">
  
    <!-- INCLUDE BODY -->
    <include>
      <pose>0 0 0 0 0 0</pose>
      <uri>model://rm2_body</uri>
      <name>b</name>
    </include>

    <!-- INCLUDE LEG 1 - ABOVE -->
    <include>
      <pose relative_to="j_b_l1">-0.085512 0 0.011284 0 0 0</pose> 
      <uri>model://rm2_leg</uri>
      <name>l1</name>
    </include>

    <!-- JOINT BODY - LEG 1 - ABOVE -->
    <joint name="j_b_l1" type="revolute">
      <pose relative_to="b::bodyLink">0.081 0 0.074985 0 0 0</pose>
      <parent>b::bodyLink</parent>
      <child>l1::legLink</child>
      <axis>
        <xyz>1 0 0</xyz>
        <limit>
          <lower>-1.041</lower>
          <upper>1.041</upper>
        </limit>
      </axis>
    </joint>

    <!-- MOVE JOINT BODY - LEG 1 - ABOVE-->
    <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
      <joint_name>j_b_l1</joint_name>
      <topic>pos_j_b_l1</topic>
    </plugin>

    <!-- INCLUDE LEG 2 - LEFT -->
    <include>
      <pose relative_to="j_b_l2">-0.085512 0 0.011284 0 0 0</pose>
      <uri>model://rm2_leg</uri>
      <name>l2</name>
    </include>

    <!-- JOINT BODY - LEG 2 - LEFT -->
    <joint name="j_b_l2" type="revolute">
      <pose relative_to="b::bodyLink">0.081 0.064947 -0.037515 -2.09439510239 0 0</pose> <!-- -120ยบ -->
      <parent>b::bodyLink</parent>
      <child>l2::legLink</child>
      <axis>
        <xyz>1 0 0</xyz>
        <limit>
          <lower>-1.041</lower>
          <upper>1.041</upper>
        </limit>
      </axis>
    </joint>

    <!-- MOVE JOINT BODY - LEG 2 - LEFT -->
    <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
      <joint_name>j_b_l2</joint_name>
      <topic>pos_j_b_l2</topic>
    </plugin>
    
    <!-- INCLUDE LEG 3 - RIGTH -->
    <include>
      <pose relative_to="j_b_l3">-0.085512 0 0.011284 0 0 0</pose>
      <uri>model://rm2_leg</uri>
      <name>l3</name>
    </include>

    <!-- JOINT BODY - LEG 3 - RIGHT -->
    <joint name="j_b_l3" type="revolute">
      <pose relative_to="b::bodyLink">0.081 -0.064947 -0.037515 2.09439510239 0 0</pose> <!-- 120ยบ -->
      <parent>b::bodyLink</parent>
      <child>l3::legLink</child>
      <axis>
        <xyz>1 0 0</xyz>
        <limit>
          <lower>-1.041</lower>
          <upper>1.041</upper>
        </limit>
      </axis>
    </joint>

    <!-- MOVE JOINT BODY - LEG 3 - RIGTH -->
    <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
      <joint_name>j_b_l3</joint_name>
      <topic>pos_j_b_l3</topic>
    </plugin>

          <!-- NO VA TODAVIA -->
        <!--    <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
            <joint_name>l1:j_l_fm1</joint_name>
            <topic>pos_j_b_l1_fm1</topic>
          </plugin>-->
    
  </model>
</sdf>
