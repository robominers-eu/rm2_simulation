<?xml version="1.0"?>
<sdf version="1.6">
  <model name="rm2_simple">
    <pose>0 0 0 0 0 0</pose>
    <!-- INCLUDE BODY -->
    <include>
      <pose>0 0 0 0 0 0</pose>
      <uri>model://rm2_body</uri>
      <name>b</name>
    </include>

    <!-- INCLUDE ACTUATOR 1 -->
    <include>
      <pose relative_to="j_b_a1">-0.085512 0 0.011284 0 0 0</pose>
      <uri>model://rm2_simple_leg_actuator</uri>
      <name>a1</name>
    </include>

    <!-- JOINT BODY - ACTUATOR 1 -->
    <joint name="j_b_a1" type="revolute">
      <pose relative_to="b::bodyLink">0.081 0 0.074985 0 0 0</pose>
      <parent>b::bodyLink</parent>
      <child>a1::motorsLink</child>
      <axis>
        <xyz>1 0 0</xyz>
        <limit>
          <lower>-0.785398</lower>
          <upper>0.785398</upper>
        </limit>
      </axis>
    </joint>

    <!-- MOVE JOINT BODY - ACTUATOR 1 
    <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
      <joint_name>j_b_a1</joint_name>
      <topic>pos_j_a1</topic>
    </plugin>-->
    

    <!-- INCLUDE ACTUATOR 2 -->
    <include>
      <pose relative_to="j_b_a2">-0.085512 0 0.011284 0 0 0</pose>
      <uri>model://rm2_simple_leg_actuator</uri>
      <name>a2</name>
    </include>

    <!-- JOINT BODY - ACTUATOR 2 -->
    <joint name="j_b_a2" type="revolute">
      <pose relative_to="b::bodyLink">0.081 0.064947 -0.037515 -2.09439510239 0 0</pose>
      <parent>b::bodyLink</parent>
      <child>a2::motorsLink</child>
      <axis>
        <xyz>1 0 0</xyz>
        <limit>
          <lower>-0.785398</lower>
          <upper>0.785398</upper>
        </limit>
      </axis>
    </joint>

    <!-- MOVE JOINT BODY - ACTUATOR 2 
    <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
      <joint_name>j_b_a2</joint_name>
      <topic>pos_j_a2</topic>
    </plugin>-->
    

    <!-- INCLUDE ACTUATOR 3 -->
    <include>
      <pose relative_to="j_b_a3">-0.085512 0 0.011284 0 0 0</pose>
      <uri>model://rm2_simple_leg_actuator</uri>
      <name>a3</name>
    </include>

    <!-- JOINT BODY - ACTUATOR 3 -->
    <joint name="j_b_a3" type="revolute">
      <pose relative_to="b::bodyLink">0.081 -0.064947 -0.037515 2.09439510239 0 0</pose>
      <parent>b::bodyLink</parent>
      <child>a3::motorsLink</child>
      <axis>
        <xyz>1 0 0</xyz>
        <limit>
          <lower>-0.785398</lower>
          <upper>0.785398</upper>
        </limit>
      </axis>
    </joint>

    <!-- MOVE JOINT BODY - ACTUATOR 3 
    <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
      <joint_name>j_b_a3</joint_name>
      <topic>pos_j_a3</topic>
    </plugin>-->

          <!-- NO VA TODAVIA -->
        <!--    <plugin filename="ignition-gazebo-joint-position-controller-system" name="ignition::gazebo::systems::JointPositionController">
            <joint_name>l1:j_l_fm1</joint_name>
            <topic>pos_j_l1_fm1</topic>
          </plugin>-->
          
    <!--ign topic -t "/j_b_a1_cmd" -m ignition.msgs.Double -p "data: 0.0"-->
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>j_b_a1</joint_name>
      <topic>j_b_a1_cmd</topic>
      <p_gain>4</p_gain>
      <i_gain>1</i_gain>
      <d_gain>1</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>
    
    <!--ign topic -t "/j_m_f_a1_cmd" -m ignition.msgs.Double -p "data: 0.0"-->
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>a1::j_m_f</joint_name>
      <topic>j_m_f_a1_cmd</topic>
      <p_gain>4</p_gain>
      <i_gain>1</i_gain>
      <d_gain>1</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>
    
    <!--ign topic -t "/j_f_ab_a1_cmd" -m ignition.msgs.Double -p "data: 0.0"-->
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>a1::j_f_ab</joint_name>
      <topic>j_f_ab_a1_cmd</topic>
      <p_gain>4</p_gain>
      <i_gain>1</i_gain>
      <d_gain>1</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>
    
    <!--ign topic -t "/model/rm2_simple/joint/a1::j_ab_fa/cmd_vel" -m ignition.msgs.Double -p "data: -1.0"-->
    <plugin
      filename="ignition-gazebo-joint-controller-system"
      name="ignition::gazebo::systems::JointController">
      <joint_name>a1::j_ab_fa</joint_name>
      <!--<initial_velocity>10.0</initial_velocity>-->
    </plugin>
    
    <!--ign topic -t "/model/rm2_simple/joint/a1::j_ab_ba/cmd_vel" -m ignition.msgs.Double -p "data: -1.0"-->
    <plugin
      filename="ignition-gazebo-joint-controller-system"
      name="ignition::gazebo::systems::JointController">
      <joint_name>a1::j_ab_ba</joint_name>
      <!--<initial_velocity>10.0</initial_velocity>-->
    </plugin>
    
    <!--ign topic -t "/j_ab_fa_a1_cmd" -m ignition.msgs.Double -p "data: 0.0"
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>a1::j_ab_fa</joint_name>
      <topic>j_ab_fa_a1_cmd</topic>
      <p_gain>3</p_gain>
      <i_gain>0.4</i_gain>
      <d_gain>0.4</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>-->
    
    <!--ign topic -t "/j_ab_ba_a1_cmd" -m ignition.msgs.Double -p "data: 0.0"
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>a1::j_ab_ba</joint_name>
      <topic>j_ab_ba_a1_cmd</topic>
      <p_gain>3</p_gain>
      <i_gain>0.4</i_gain>
      <d_gain>0.4</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>-->
    
    <!--ign topic -t "/j_b_a2_cmd" -m ignition.msgs.Double -p "data: 0.0"-->
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>j_b_a2</joint_name>
      <topic>j_b_a2_cmd</topic>
      <p_gain>4</p_gain>
      <i_gain>5</i_gain>
      <d_gain>0.4</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>
    
    <!--ign topic -t "/j_m_f_a2_cmd" -m ignition.msgs.Double -p "data: 0.0"-->
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>a2::j_m_f</joint_name>
      <topic>j_m_f_a2_cmd</topic>
      <p_gain>4</p_gain>
      <i_gain>1</i_gain>
      <d_gain>1</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>
    
    <!--ign topic -t "/j_f_ab_a2_cmd" -m ignition.msgs.Double -p "data: 0.0"-->
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>a2::j_f_ab</joint_name>
      <topic>j_f_ab_a2_cmd</topic>
      <p_gain>6</p_gain>
      <i_gain>1</i_gain>
      <d_gain>1</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>
    
    <!--ign topic -t "/model/rm2_simple/joint/a2::j_ab_fa/cmd_vel" -m ignition.msgs.Double -p "data: -1.0"-->
    <plugin
      filename="ignition-gazebo-joint-controller-system"
      name="ignition::gazebo::systems::JointController">
      <joint_name>a2::j_ab_fa</joint_name>
      <!--<initial_velocity>10.0</initial_velocity>-->
    </plugin>
    
    <!--ign topic -t "/model/rm2_simple/joint/a2::j_ab_ba/cmd_vel" -m ignition.msgs.Double -p "data: -1.0"-->
    <plugin
      filename="ignition-gazebo-joint-controller-system"
      name="ignition::gazebo::systems::JointController">
      <joint_name>a2::j_ab_ba</joint_name>
      <!--<initial_velocity>10.0</initial_velocity>-->
    </plugin>
    
    <!--ign topic -t "/j_ab_fa_a2_cmd" -m ignition.msgs.Double -p "data: 0.0"
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>a2::j_ab_fa</joint_name>
      <topic>j_ab_fa_a2_cmd</topic>
      <p_gain>3</p_gain>
      <i_gain>0.4</i_gain>
      <d_gain>0.4</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>-->
    
        <!--ign topic -t "/j_ab_ba_a2_cmd" -m ignition.msgs.Double -p "data: 0.0"
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>a2::j_ab_ba</joint_name>
      <topic>j_ab_ba_a2_cmd</topic>
      <p_gain>3</p_gain>
      <i_gain>0.4</i_gain>
      <d_gain>0.4</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>-->
    
    <!--ign topic -t "/j_b_a3_cmd" -m ignition.msgs.Double -p "data: 0.0"-->
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>j_b_a3</joint_name>
      <topic>j_b_a3_cmd</topic>
      <p_gain>4</p_gain>
      <i_gain>5</i_gain>
      <d_gain>0.4</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>
    
    <!--ign topic -t "/j_m_f_a3_cmd" -m ignition.msgs.Double -p "data: 0.0"-->
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>a3::j_m_f</joint_name>
      <topic>j_m_f_a3_cmd</topic>
      <p_gain>4</p_gain>
      <i_gain>1</i_gain>
      <d_gain>1</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>
    
    <!--ign topic -t "/j_f_ab_a3_cmd" -m ignition.msgs.Double -p "data: 0.0"-->
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>a3::j_f_ab</joint_name>
      <topic>j_f_ab_a3_cmd</topic>
      <p_gain>6</p_gain>
      <i_gain>1</i_gain>
      <d_gain>1</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>
    
    <!--ign topic -t "/model/rm2_simple/joint/a3::j_ab_fa/cmd_vel" -m ignition.msgs.Double -p "data: -1.0"-->
    <plugin
      filename="ignition-gazebo-joint-controller-system"
      name="ignition::gazebo::systems::JointController">
      <joint_name>a3::j_ab_fa</joint_name>
      <!--<initial_velocity>10.0</initial_velocity>-->
    </plugin>
    
    <!--ign topic -t "/model/rm2_simple/joint/a3::j_ab_ba/cmd_vel" -m ignition.msgs.Double -p "data: -1.0"-->
    <plugin
      filename="ignition-gazebo-joint-controller-system"
      name="ignition::gazebo::systems::JointController">
      <joint_name>a3::j_ab_ba</joint_name>
      <!--<initial_velocity>10.0</initial_velocity>-->
    </plugin>
    
    <!--ign topic -t "/j_ab_fa_a3_cmd" -m ignition.msgs.Double -p "data: 0.0"
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>a3::j_ab_fa</joint_name>
      <topic>j_ab_fa_a3_cmd</topic>
      <p_gain>3</p_gain>
      <i_gain>0.4</i_gain>
      <d_gain>0.4</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>-->
    
        <!--ign topic -t "/j_ab_ba_a3_cmd" -m ignition.msgs.Double -p "data: 0.0"
    <plugin
      filename="ignition-gazebo-joint-position-controller-system"
      name="ignition::gazebo::systems::JointPositionController">
      <joint_name>a3::j_ab_ba</joint_name>
      <topic>j_ab_ba_a3_cmd</topic>
      <p_gain>3</p_gain>
      <i_gain>0.4</i_gain>
      <d_gain>0.4</d_gain>
      <i_max>1</i_max>
      <i_min>-1</i_min>
      <cmd_max>1000</cmd_max>
      <cmd_min>-1000</cmd_min>
    </plugin>-->
    <!--ign topic -t "/j_ab_fa_a2_force" -m ignition.msgs.Double  -p "data: 0.001"-->
    <!--ign topic -t "/model/rm2_simple/joint/a2::j_ab_fa/cmd_force" -m ignition.msgs.Double  -p "data: 0.001"-->
    <!--<plugin
      filename="ignition-gazebo-apply-joint-force-system"
      name="ignition::gazebo::systems::ApplyJointForce">
      <joint_name>a2::j_ab_fa</joint_name>
      <topic>j_ab_fa_a2_force</topic>
    </plugin>-->
    <!--ign topic -t "/j_ab_fa_a2_force"  -m ignition.msgs.Double  -p "data: 0.001"-->
    <!--ign topic -t "/model/rm2_simple/joint/j_b_a1/cmd_force" -m ignition.msgs.Double  -p "data: 0.001"-->
    <!--<plugin
      filename="ignition-gazebo-apply-joint-force-system"
      name="ignition::gazebo::systems::ApplyJointForce">
      <joint_name>j_b_a1</joint_name>
      <topic>j_ab_fa_a2_force</topic>
    </plugin>-->
    <!--<plugin filename="home/psoler/beca_rm2/control_plugin/build/libControl.so"
            name="ignition::gazebo::systems:Control">
      <topic_cmd>control_cmd</topic_cmd>
      <topic_jba2>j_b_a2_cmd</topic_jba2>
      <topic_jba3>j_b_a3_cmd</topic_jba3>
      <topic_jabfa2>model/rm2_simple/joint/a2::j_ab_fa/cmd_vel</topic_jabfa2>
      <topic_jabba2>model/rm2_simple/joint/a2::j_ab_ba/cmd_vel</topic_jabba2>
      <topic_jabfa3>model/rm2_simple/joint/a3::j_ab_fa/cmd_vel</topic_jabfa3>
      <topic_jabba3>model/rm2_simple/joint/a3::j_ab_ba/cmd_vel</topic_jabba3>
    </plugin>-->
  </model>
</sdf>
