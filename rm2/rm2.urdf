<?xml version="1.0" ?>
<robot name="rm2_sim">
        <!-- Links -->
        <link name="base_link">
                <visual name='visual'>
                        <geometry>
                                <mesh filename="rm2_simulation:model://models/rm2/rm2_body/meshes/body_structure_blue.dae"/>
                        </geometry>
                </visual>
        </link>
        <link name="l1::lLink"/>
        <link name="l1::mLink"/>
        <link name="l1::fLink"/>
        <link name="l2::lLink"/>
        <link name="l2::mLink"/>
        <link name="l2::fLink"/>
        <link name="l3::lLink"/>
        <link name="l3::mLink"/>
        <link name="l3::fLink"/>
        <link name="sa1::aLink"/>
        <link name="sa1::sbLink"/>
        <link name="sa1::cwsLink"/>
        <link name="sa1::ccwsLink"/>
        <link name="sa2::aLink"/>
        <link name="sa2::sbLink"/>
        <link name="sa2::cwsLink"/>
        <link name="sa2::ccwsLink"/>
        <link name="sa3::aLink"/>
        <link name="sa3::sbLink"/>
        <link name="sa3::cwsLink"/>
        <link name="sa3::ccwsLink"/>
        <link name="wa2::aLink"/>
        <link name="wa2::wbLink"/>
        <link name="wa2::fwLink"/>
        <link name="wa2::rwLink"/>
        <link name="wa3::aLink"/>
        <link name="wa3::wbLink"/>
        <link name="wa3::fwLink"/>
        <link name="wa3::rwLink"/> 
        <link name="d_435_camera"/>
        <link name="lidar"/>

        <!-- Body joints -->
        <!-- JOINT BODY - SIMPLE LEG 1 - ABOVE -->
        <joint name="j_b_l1" type="fixed">
                <origin rpy="0 0 0" xyz="0.083 0 0.075"/>
                <parent link="base_link"/>
                <child link="l1::lLink"/>
        </joint>
        <!-- JOINT BODY - SIMPLE LEG 2 - LEFT -->
        <joint name="j_b_l2" type="fixed">
                <origin rpy="-2.0944 0 0" xyz="0.083 0.065 -0.0375"/>
                <parent link="base_link"/>
                <child link="l2::lLink"/>
        </joint>
        <!-- JOINT BODY - SIMPLE LEG 3 - RIGHT -->
        <joint name="j_b_l3" type="fixed">
                <origin rpy="2.0944 0 0" xyz="0.083 -0.065 -0.0375"/>
                <parent link="base_link"/>
                <child link="l3::lLink"/>
        </joint>
        <!-- JOINT SIMPLE LEG 1 - SCREW ACTUATOR 1 - ABOVE -->
        <!-- OJO: AQUÍ TENEMOS QUE REFERIR LAS JOINTS RESPECTO A LA JOINT ANTERIOR PORQUE ES DONDE SE ENCUENTRA EL LINK -->
        <joint name="j_l1_sa1" type="fixed">
                <origin rpy = "0 0 0" xyz = "-0.0127 0.005 0.092"/>
                <parent link = "l1::fLink" />
                <child link = "sa1::aLink" />
        </joint>
        <!-- JOINT SIMPLE LEG 2 - SCREW ACTUATOR 2 - LEFT -->
        <joint name="j_l2_sa2" type="fixed">
                <origin rpy = "0 0 0" xyz = "-0.0127 0.005 0.092"/>
                <parent link = "l2::fLink" />
                <child link = "sa2::aLink" />
        </joint>
        <!-- JOINT SIMPLE LEG 2 - WHEELS ACTUATOR 2 - LEFT -->
        <joint name="j_l2_wa2" type="fixed">
                <origin rpy = "0 0 0" xyz = "-0.0127 0.005 0.092"/>
                <parent link = "l2::fLink" />
                <child link = "wa2::aLink" />
        </joint>
        <!-- JOINT SIMPLE LEG 3 - SCREW ACTUATOR 3 - RIGHT -->
        <joint name="j_l3_sa3" type="fixed">
                <origin rpy = "0 0 0" xyz = "-0.0127 0.005 0.092"/>
                <parent link = "l3::fLink" />
                <child link = "sa3::aLink" />
        </joint>
        <!-- JOINT SIMPLE LEG 3 - WHEELS ACTUATOR 3 - RIGHT -->
        <joint name="j_l3_wa3" type="fixed">
                <origin rpy = "0 0 0" xyz = "-0.0127 0.005 0.092"/>
                <parent link = "l3::fLink" />
                <child link = "wa3::aLink" />
        </joint>
        <!-- Joint camera - body -->
        <joint name="j_rgbd_b" type="fixed">
                <origin rpy = "0 0 0" xyz = "0.090 0 0.038911"/>
                <parent link = "base_link" />
                <child link = "d_435_camera" />
        </joint>
        <!-- Joint lidar - body -->
        <joint name="j_lidar_b" type="fixed">
                <origin rpy = "0 0 0" xyz = "0 0 0.25"/>
                <parent link = "base_link" />
                <child link = "lidar" />
        </joint>
        <!-- JOINT LEG - MOTORS -->
        <joint name="l1::j_l_m" type="fixed">
                <origin rpy = "0 0 0" xyz = "0 0 0"/>
                <parent link = "l1::lLink" />
                <child link = "l1::mLink" />
        </joint>
        <!-- JOINT MOTORS - FRAMES -->
        <joint name="l1::j_m_f" type="fixed">
                <origin rpy = "0 0 0" xyz = "-0.0669 0.019 0.024"/>
                <parent link = "l1::mLink" />
                <child link = "l1::fLink" />
        </joint>
        <!-- JOINT LEG - MOTORS -->
        <joint name="l2::j_l_m" type="fixed">
                <origin rpy = "-0.523599 0 0" xyz = "0 0 0"/>
                <parent link = "l2::lLink" />
                <child link = "l2::mLink" />
        </joint>
        <!-- JOINT MOTORS - FRAMES -->
        <joint name="l2::j_m_f" type="fixed">
                <origin rpy = "0 0 0" xyz = "-0.0669 0.019 0.024"/>
                <parent link = "l2::mLink" />
                <child link = "l2::fLink" />
        </joint>
        <!-- JOINT LEG - MOTORS -->
        <joint name="l3::j_l_m" type="fixed">
                <origin rpy = "0.523599 0 0" xyz = "0 0 0"/>
                <parent link = "l3::lLink" />
                <child link = "l3::mLink" />
        </joint>
        <!-- JOINT MOTORS - FRAMES -->
        <joint name="l3::j_m_f" type="fixed">
                <origin rpy = "0 0 0" xyz = "-0.0669 0.019 0.024"/>
                <parent link = "l3::mLink" />
                <child link = "l3::fLink" />
        </joint>
        <!-- JOINT ACTUATOR - SCREW BASE -->
        <joint name="sa1::j_a_sb" type="fixed">
                <origin rpy = "0 0 0" xyz = "0 0 0"/>
                <parent link = "sa1::aLink" />
                <child link = "sa1::sbLink" />
        </joint>
        <!-- JOINT SCREW BASE - CW SCREW -->
        <joint name="sa1::j_sb_cws" type="continuous">
                <origin rpy = "0 1.5708 0" xyz = "0.0055 -0.024 0.0132"/>
                <parent link = "sa1::sbLink" />
                <child link = "sa1::cwsLink" />
                <axis xyz="0 0 1" />
        </joint>
        <!-- JOINT SCREW BASE - CCW SCREW -->
        <joint name="sa1::j_sb_ccws" type="continuous">
                <origin rpy = "0 -1.5708 0" xyz = "-0.0145 -0.024 0.0132"/>
                <parent link = "sa1::sbLink" />
                <child link = "sa1::ccwsLink" />
                <axis xyz="0 0 1" />
        </joint>
        <!-- JOINT ACTUATOR - SCREW BASE -->
        <joint name="sa2::j_a_sb" type="fixed">
                <origin rpy = "0 0 0" xyz = "0 0 0"/>
                <parent link = "sa2::aLink" />
                <child link = "sa2::sbLink" />
        </joint>
        <!-- JOINT SCREW BASE - CW SCREW -->
        <joint name="sa2::j_sb_cws" type="continuous">
                <origin rpy = "0 1.5708 0" xyz = "0.0055 -0.024 0.0132"/>
                <parent link = "sa2::sbLink" />
                <child link = "sa2::cwsLink" />
                <axis xyz="0 0 1" />
        </joint>
        <!-- JOINT SCREW BASE - CCW SCREW -->
        <joint name="sa2::j_sb_ccws" type="continuous">
                <origin rpy = "0 -1.5708 0" xyz = "-0.0145 -0.024 0.0132"/>
                <parent link = "sa2::sbLink" />
                <child link = "sa2::ccwsLink" />
                <axis xyz="0 0 1" />
        </joint>
        <!-- JOINT ACTUATOR - SCREW BASE -->
        <joint name="sa3::j_a_sb" type="fixed">
                <origin rpy = "0 0 0" xyz = "0 0 0"/>
                <parent link = "sa3::aLink" />
                <child link = "sa3::sbLink" />
        </joint>
        <!-- JOINT SCREW BASE - CW SCREW -->
        <joint name="sa3::j_sb_cws" type="continuous">
                <origin rpy = "0 1.5708 0" xyz = "0.0055 -0.024 0.0132"/>
                <parent link = "sa3::sbLink" />
                <child link = "sa3::cwsLink" />
                <axis xyz="0 0 1" />
        </joint>
        <!-- JOINT SCREW BASE - CCW SCREW -->
        <joint  name="sa3::j_sb_ccws" type="continuous">
                <origin rpy = "0 -1.5708 0" xyz = "-0.0145 -0.024 0.0132"/>
                <parent link = "sa3::sbLink" />
                <child link = "sa3::ccwsLink" />
                <axis xyz="0 0 1" />
        </joint>
        <!-- JOINT ACTUATOR - WHEELS BAR -->
        <joint name="wa2::j_a_wb" type="fixed">
                <origin rpy = "0 -0.523599 1.5708" xyz = "-0.0045 -0.024 0.0132"/>
                <parent link = "wa2::aLink" />
                <child link = "wa2::wbLink" />
        </joint>
        <!-- JOINT WHEELS BAR - FRONT WHEEL -->
        <joint name="wa2::j_wb_fw" type="continuous">
                <origin rpy = "1.5708 0 0" xyz = "0.009 0 0.040"/>
                <parent link = "wa2::wbLink" />
                <child link = "wa2::fwLink" />
               <axis xyz="0 0 1" />
        </joint>
        <!-- JOINT WHEELS BAR - REAR WHEEL -->
        <joint name="wa2::j_wb_rw" type="continuous">
                <origin rpy = "1.5708 0 0" xyz = "0.009 0 -0.040"/>
                <parent link = "wa2::wbLink" />
                <child link = "wa2::rwLink" />
               <axis xyz="0 0 1" />
        </joint>
        <!-- JOINT ACTUATOR - WHEELS BAR -->
        <joint name="wa3::j_a_wb" type="fixed">
                <origin rpy = "0 -0.523599 1.5708" xyz = "-0.0045 -0.024 0.0132"/>
                <parent link = "wa3::aLink" />
                <child link = "wa3::wbLink" />
        </joint>
        <!-- JOINT WHEELS BAR - FRONT WHEEL -->
        <joint name="wa3::j_wb_fw" type="continuous">
                <origin rpy = "1.5708 0 0" xyz = "0.009 0 0.040"/>
                <parent link = "wa3::wbLink" />
                <child link = "wa3::fwLink" />
               <axis xyz="0 0 1" />
        </joint>
        <!-- JOINT WHEELS BAR - REAR WHEEL -->
        <joint name="wa3::j_wb_rw" type="continuous">
                <origin rpy = "1.5708 0 0" xyz = "0.009 0 -0.040"/>
                <parent link = "wa3::wbLink" />
                <child link = "wa3::rwLink" />
               <axis xyz="0 0 1" />
        </joint>

<!-- <gazebo reference="d_435_camera">
    <self_collide>0</self_collide>
    <enable_wind>0</enable_wind>
    <kinematic>0</kinematic>
    <gravity>1</gravity>
    <mu2>1</mu2>
    <fdir1>0 0 0</fdir1>
    <kp>1e+13</kp>
    <kd>1</kd>
    <sensor name="d435_color" type="camera">
      <camera name="d435">
        <horizontal_fov>1.2112585008840648</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>RGB_INT8</format>
        </image>
        <clip>
          <near>0.1</near>
          <far>100</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
      <always_on>1</always_on>
      <update_rate>30</update_rate>
      <visualize>1</visualize>
    </sensor>
    
    <sensor name="d435_depth" type="depth">
      <camera name="d435">
        <horizontal_fov>1.4870205226991688</horizontal_fov>
        <image>
          <width>1280</width>
          <height>720</height>
        </image>
        <clip>
          <near>0.1</near>
          <far>100</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.100</stddev>
        </noise>
      </camera>
      <always_on>1</always_on>
      <update_rate>90</update_rate>
      <visualize>0</visualize>
    </sensor>
  </gazebo>

   

 <gazebo>
    <plugin filename="libgazebo_ros_diff_drive.so" name="differential_drive_controller">
      <legacyMode>false</legacyMode>
      <alwaysOn>true</alwaysOn>
      <updateRate>1000</updateRate>
      <left_joint>wa2::j_wb_fw</left_joint>
      <left_joint>wa2::j_wb_bw</left_joint>
      <right_joint>wa3::j_wb_fw</right_joint>
      <right_joint>wa3::j_wb_bw</right_joint>
      <commandTopic>/cmd_vel</commandTopic>
      <odometryTopic>odom</odometryTopic>
      <odometryFrame>odom</odometryFrame>
      <robotBaseFrame>base_link</robotBaseFrame>
    </plugin>
  </gazebo> -->

</robot>
